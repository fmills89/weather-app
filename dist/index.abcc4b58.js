var userFormEl=document.querySelector("#user-form"),cityInputEl=document.querySelector("#city"),cityContainerEl=document.querySelector("#city-container"),searchHistoryEl=document.querySelector("#search-history"),forecastContainerEl=document.querySelector("#forecast-container"),APIkey="a72e3fb63a67ce75037508eeb42b61ef",cities=[],loadCities=()=>{var e=localStorage.getItem("cities");if(!e)return!1;e=JSON.parse(e),console.log(e);for(var t=0;t<e.length;t++)displaySearchedCities(e[t]),cities.push(e[t])},saveCities=()=>{localStorage.setItem("cities",JSON.stringify(cities))},displaySearchedCities=e=>{var t=document.createElement("div");t.setAttribute("class","button pl-2 ml-2");var r=document.createElement("div");r.setAttribute("class","card-body searched-city"),r.textContent=e,t.appendChild(r),t.addEventListener("click",(function(){getCityDetails(e)})),searchHistoryEl.appendChild(t)},formSubmitHandler=e=>{e.preventDefault();let t=cityInputEl.value.trim();t?(getCityDetails(t),cityInputEl.value=""):alert("Please enter a city name.")},getCityDetails=e=>{fetch("https://api.openweathermap.org/data/2.5/weather?q="+e+"&units=imperial&appid="+APIkey).then((function(e){e.ok?e.json().then((function(e){var t=e.name,r=e.coord.lat,a=e.coord.lon;cities.includes(t)||(cities.push(t),saveCities(),displaySearchedCities(t)),getWeatherDetails(t,r,a)})):alert("Error, this city could not be found.")}))},getWeatherDetails=(e,t,r)=>{fetch("https://api.openweathermap.org/data/2.5/onecall?lat="+t+"&lon="+r+"&units=imperial&exclude=minutely,hourly&appid="+APIkey).then((t=>{t.json().then((t=>{console.log(t),displayCityDetails(t,e),displayForcasted(t)}))}))},displayCityDetails=(e,t)=>{var r=Math.round(e.current.temp),a=Math.round(e.current.wind_speed),n=e.current.humidity,i=e.current.uvi,d=e.current.weather[0].icon;cityContainerEl.textContent="";var o=document.createElement("div"),l=document.createElement("h2"),c=moment().format("L"),s=document.createElement("img");s.setAttribute("src","http://openweathermap.org/img/wn/"+d+"@2x.png"),l.textContent=t+" ("+c+")",l.setAttribute("class","img"),o.appendChild(l),o.appendChild(s),cityContainerEl.appendChild(o);var p=document.createElement("div");p.setAttribute("class","p-2 m-2");var m=document.createElement("p");m.setAttribute("class","border rounded-md bg-white p-2 m-2");var u=document.createElement("p");u.setAttribute("class","border rounded-md bg-white p-2 m-2");var h=document.createElement("p");h.setAttribute("class","border rounded-md bg-white p-2 m-2");var y=document.createElement("p");y.setAttribute("class","border rounded-md bg-white p-2 m-2"),m.textContent="Temperature: "+r+"Â°F",u.textContent="Wind: "+a+" MPH",h.textContent="Humidity: "+n+"%",y.textContent="UV Index: "+i,p.appendChild(m),p.appendChild(u),p.appendChild(h),p.appendChild(y),cityContainerEl.appendChild(p)},displayForcasted=e=>{forecastContainerEl.textContent="";for(var t=0;t<7;t++){var r=Math.round(e.daily[t].temp.day);const h=r<50?"ðŸ¥¶":"";var a=e.daily[t].wind_speed,n=e.daily[t].humidity,i=e.daily[t].weather[0].icon;console.log(r),console.log(i);var d=document.createElement("div");d.setAttribute("class","bg-slate-700 bg-opacity-75 rounded-lg p-6 drop-shadow-xl border border-blue-300 h-full");var o=document.createElement("div");o.setAttribute("class","text-left p-4 m-4");var l=document.createElement("h6");function c(e,t){Object.keys(t).forEach((r=>{e.setAttribute(r,t[r])}))}l.setAttribute("class","p-2 m-2 text-lg font-bold"),l.textContent=moment().add(t,"days").format("L");const y={name:"weather icon",class:"pb-4 m-6 bg-blue-500",src:`https://openweathermap.org/img/wn/${i}@2x.png`};var s=document.createElement("img");c(s,y);var p=document.createElement("p");p.setAttribute("class","border rounded-md bg-white drop-shadow-2xl p-2 m-2"),p.textContent=`Temperature:  ${r} Â°F ${h}`;var m=document.createElement("p");m.setAttribute("class","border rounded-md bg-white drop-shadow-2xl p-2 m-2"),m.textContent=`Wind: ${a}`;var u=document.createElement("p");u.setAttribute("class","border rounded-md bg-white drop-shadow-2xl p-2 m-2"),u.textContent=`Humidity: ${n}%`,o.appendChild(l),o.appendChild(s),o.appendChild(p),o.appendChild(m),o.appendChild(u),d.appendChild(o),forecastContainerEl.appendChild(d),userFormEl.reset()}};loadCities(),userFormEl.addEventListener("submit",formSubmitHandler);
//# sourceMappingURL=index.abcc4b58.js.map
